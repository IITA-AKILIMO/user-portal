(()=>{var n,e,a;n=jQuery,e=igd.ModuleBuilderModal,a={init:function(){n(".insert-file-row").after('<div class="igd-dokan"><button type="button" class="dokan-btn dokan-btn-default igd-wc-button"><img src="'.concat(igd.pluginUrl,'/assets/images/drive.png" width="20"/><span>').concat(wp.i18n.__("Add File","integrate-google-drive"),"</span></button></div>")),n(document).on("click",".dokan-btn.igd-wc-button",a.handleDokanFileSelector),n(document).on("click",".save-upload-settings",a.saveDokanUploadSettings)},handleDokanFileSelector:function(a){var o=n(this).parents(".dokan-download-wrapper");Swal.fire({html:'<div id="igd-select-files" class="igd-module-builder-modal-wrap"></div>',showConfirmButton:!1,customClass:{container:"igd-module-builder-modal-container"},didOpen:function(a){ReactDOM.render(React.createElement(e,{initData:{},onUpdate:function(e){var a=e.folders,t=void 0===a?[]:a,i=o.find("tbody"),d=o.find(".insert-file-row ").data("row");t.map((function(e){var a=e.id,o=e.name,t=e.type,s=e.accountId,l="https://drive.google.com/open?action=igd-wc-download&id=".concat(a,"&account_id=").concat(s,"&name=").concat(o,"&type=").concat(t),c=n(d);c.find('[name="_wc_file_names[]"]').val(o),c.find('[name="_wc_file_urls[]"]').val(l),i.append(c)})),Swal.close()},onClose:function(){return Swal.close()},isSelectFiles:!0}),document.getElementById("igd-select-files"))},willClose:function(n){ReactDOM.unmountComponentAtNode(document.getElementById("igd-select-files"))}})},saveDokanUploadSettings:function(){var e=this;wp.ajax.send("igd_save_dokan_upload_settings",{data:{data:n("#igd-dokan-upload-settings").serialize()},beforeSend:function(){n(e).find("i").removeClass("fa-save").addClass("fa-spinner fa-spin")},success:function(e){n(".dokan-igd-ajax-response").show()},error:function(n){console.log(n)},complete:function(){n(e).find("i").removeClass("fa-spin fa-spinner").addClass("fa-save")}})}},n(document).ready(a.init)})();